<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Analyzer</title>
<script src="main.js"></script>
<link rel="stylesheet" href="styles.css">
<link href="https://transloadit.edgly.net/releases/uppy/v0.23.3/dist/uppy.min.css" rel="stylesheet">
<script src="https://transloadit.edgly.net/releases/uppy/v0.23.3/dist/uppy.min.js"></script>
<script>
    const test = { "how": [ "0", "6" ], 
    "long": [ "1", "6" ], 
    "is": [ "1", "6", "14" ], 
    "a": [ "2", "4", "5" ], 
    "day": [ "2", "5" ], 
    "on": [ "2", "9", "11", "14" ], 
    "the": [ "2", "7", "9", "12" ], 
    "Sun": [ "2" ], 
    "at": [ "3" ], 
    "first": [ "3" ], 
    "might": [ "4" ], 
    "seem": [ "4" ], 
    "like": [ "4" ], 
    "stupid": [ "4" ], 
    "question": [ "5" ], 
    "it": [ "6" ], 
    "takes": [ "6" ], 
    "sun": [ "7", "9", "12" ], 
    "to": [ "7" ], 
    "come": [ "7" ], 
    "back": [ "7" ], 
    "over": [ "7" ], 
    "head": [ "8" ], 
    "doesn't": [ "8" ], 
    "happen": [ "8" ], 
    "unless": [ "9" ], 
    "you're": [ "9" ], 
    "standing": [ "10" ], 
    "upside": [ "10" ], 
    "down": [ "10" ], 
    "and": [ "10", "13" ], 
    "in": [ "11" ], 
    "which": [ "11" ], 
    "case": [ "11" ], 
    "days": [ "11" ], 
    "are": [ "12" ], 
    "you": [ "12" ], 
    "intentionally": [ "12" ], 
    "short": [ "13" ], 
    "your": [ "14" ], 
    "hair": [ "14" ], 
    "fire": [ "14" ] 
    };

    const cse105 = {
    "in": ["0", "9"],
        "order": ["0"],
        "to": ["0"],
        "describe": ["0"],
        "this": ["0", "15"],
        "graph": ["1"],
        "the": ["1", "8", "9"],
        "state": ["2"],
        "diagram": ["2"],
        "we": ["2"],
        "can": ["3"],
        "equivalently": ["3"],
        "specify": ["4"],
        "these": ["6", "13"],
        "parameters": ["7", "8"],
        "so": ["7"],
        "formal": ["9"],
        "definition": ["9"],
        "of": ["10", "15"],
        "a": ["11"],
        "finite": ["11"],
        "automaton": ["12"],
        "are": ["12"],
        "five": ["13"],
        "components": ["14"],
        "possible": ["16"]
    };
</script>
</head>

<body>
    <div class="App">
            <header class="App-header">
                <img src= "logo.png" class="App-logo" alt="logo" />
                <h1 class="App-title">Welcome to Parsecast</h1>
            </header>
    </div>
    <form id="vid-form">
            <div>
                    <label>Please insert a video url: </label><br>
                    <span><input type="text" id="user-input" value=""></span>
                    <input  type="button" id="urlbut" onclick="submitUrl()" value="Submit">
            </div>
    </form>
    <div class= "video-wrapper">
        <video id="vid" class="video-player" controls>
            <source id="vid-url" src="https://s3-us-west-1.amazonaws.com/attentionanalyzer/fire.mp4" type="video/mp4">
        </video>
    </div>
    <script>
            function submitUrl(){
                var siteHeader = document.getElementById('vid-url');
                siteHeader.setAttribute("src", document.getElementById("user-input").value);
                document.getElementById("vid").load();
            }
    </script>
    
    <form id="frm1">
        Keyword: <input type="text" id="fname" value="">
        <input type="button" onclick="myFunction()" id="btn2" value="Submit"> 
        <button id="btn">
                Next instance
        </button>
    </form>

    <script>
        function myFunction(){
            var query = document.getElementById("fname").value;
            var result = false;
            if (document.getElementById('vid-url').src == 'https://s3-us-west-1.amazonaws.com/attentionanalyzer/fire.mp4') values = test[query];
            else values = cse105[query];
            if (values == undefined) alert("Your keyword "+ query + " was not found. Try again.");
            else{
                console.log(values);
                var i = 0;
                var myvideo = document.getElementById('vid'),
                        jumplink = document.getElementById('btn');
                jumplink.addEventListener("click", function(event){
                        event.preventDefault();
                        myvideo.currentTime = parseInt(values[i]);
                        i=(i+1)%values.length;
                }, false);
                
            };
        }  
             
    </script>
  
</body>

</html>